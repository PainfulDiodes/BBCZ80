DATA.asm:
     1                          	; TITLE BBC BASIC (C) R.T.RUSSELL 1981-2024
     2                          	INCLUDE "constants.inc"
constants.inc:
     1                          ; BBC BASIC Z80 - Shared Constants
     2                          ; Extracted from source modules to avoid duplicate definitions
     3                          
     4                          ; ASCII control characters
     5                          LF      EQU     0AH
     6                          CR      EQU     0DH
     7                          ; Note: ESC conflicts with label in AMOS.Z80, not included
     8                          BEL     EQU     7
     9                          BS      EQU     8
    10                          HT      EQU     9
    11                          VT      EQU     0BH
    12                          ; Note: DEL conflicts with label in MAIN.Z80, not included
    13                          
    14                          ; CP/M system addresses
    15                          ; Note: BDOS conflicts with label in DIST.Z80, not included
    16                          FCB     EQU     5CH
    17                          DSKBUF  EQU     80H
    18                          FCBSIZ  EQU     128+36+2
    19                          
    20                          ; Token values
    21                          TAND    EQU     80H
    22                          TOR     EQU     84H
    23                          TBY     EQU     0FH
    24                          TERROR  EQU     85H
    25                          TLINE   EQU     86H
    26                          TOFF    EQU     87H
    27                          TSTEP   EQU     88H
    28                          TSPC    EQU     89H
    29                          TTAB    EQU     8AH
    30                          TELSE   EQU     8BH
    31                          TTHEN   EQU     8CH
    32                          TLINO   EQU     8DH
    33                          TTO     EQU     0B8H
    34                          TCASE   EQU     0C8H
    35                          TWHILE  EQU     0C7H
    36                          TWHEN   EQU     0C9H
    37                          TOF     EQU     0CAH
    38                          TENDCASE EQU    0CBH
    39                          TOTHERWISE EQU  0CCH
    40                          TENDIF  EQU     0CDH
    41                          TENDWHILE EQU   0CEH
    42                          TCALL   EQU     0D6H
    43                          TDATA   EQU     0DCH
    44                          TDEF    EQU     0DDH
    45                          TDIM    EQU     0DEH
    46                          TEND    EQU     0E0H
    47                          TFOR    EQU     0E3H
    48                          TGOSUB  EQU     0E4H
    49                          TGOTO   EQU     0E5H
    50                          TIF     EQU     0E7H
    51                          TLOCAL  EQU     0EAH
    52                          TMODE   EQU     0EBH
    53                          TNEXT   EQU     0EDH
    54                          TON     EQU     0EEH
    55                          TPROC   EQU     0F2H
    56                          TREM    EQU     0F4H
    57                          TREPEAT EQU     0F5H
    58                          TREPORT EQU     0F6H
    59                          TRESTORE EQU    0F7H
    60                          TRETURN EQU     0F8H
    61                          TSTOP   EQU     0FAH
    62                          TTRACE  EQU     0FCH
    63                          TUNTIL  EQU     0FDH
    64                          TWIDTH  EQU     0FEH
    65                          TEXIT   EQU     10H
    66                          
    67                          ; Error codes
    68                          BADOP   EQU     1
    69                          DIVBY0  EQU     18
    70                          ; Note: TOOBIG conflicts with label in MAIN.Z80, not included
    71                          NGROOT  EQU     21
    72                          LOGRNG  EQU     22
    73                          ACLOST  EQU     23
    74                          EXPRNG  EQU     24
    75                          
DATA.asm:
     3                          ;
     4                          ;RAM MODULE FOR BBC BASIC INTERPRETER
     5                          ;FOR USE WITH VERSION 5.0 OF BBC BASIC
     6                          ;(C) COPYRIGHT R.T.RUSSELL 1981-2024
     7                          ;
     8                          	PUBLIC ACCS
     9                          	PUBLIC BUFFER
    10                          	PUBLIC ONERSP
    11                          	PUBLIC LIBASE
    12                          	PUBLIC PAGE
    13                          	PUBLIC LOMEM
    14                          	PUBLIC FREE
    15                          	PUBLIC HIMEM
    16                          	PUBLIC RANDOM
    17                          	PUBLIC COUNT
    18                          	PUBLIC WIDTH
    19                          	PUBLIC ERL
    20                          	PUBLIC ERR
    21                          	PUBLIC ERRTRP
    22                          	PUBLIC ERRTXT
    23                          	PUBLIC TRACEN
    24                          	PUBLIC AUTONO
    25                          	PUBLIC INCREM
    26                          	PUBLIC LISTON
    27                          	PUBLIC DATPTR
    28                          	PUBLIC FNPTR
    29                          	PUBLIC PROPTR
    30                          	PUBLIC STAVAR
    31                          	PUBLIC OC
    32                          	PUBLIC PC
    33                          	PUBLIC DYNVAR
    34                          	PUBLIC CURLIN
    35                          	PUBLIC USER
    36                          ;
    37                          ;n.b. ACCS, BUFFER & STAVAR must be on page boundaries.
    38                          ;
    39  0000  0000000000000000  ACCS:	DEFS	256		;STRING ACCUMULATOR
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
    40  0100  0000000000000000  BUFFER:	DEFS	256		;STRING INPUT BUFFER
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
    41  0200  0000000000000000  STAVAR:	DEFS	27*4		;STATIC VARIABLES
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              00000000          
    42                          OC	EQU	STAVAR+15*4	;CODE ORIGIN (O%)
    43                          PC	EQU	STAVAR+16*4	;PROGRAM COUNTER (P%)
    44  026c  0000000000000000  DYNVAR:	DEFS	54*2		;DYN. VARIABLE POINTERS
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              0000000000000000  
              00000000          
    45  02d8  0000              FNPTR:	DEFS	2		;DYN. FUNCTION POINTER
    46  02da  0000              PROPTR:	DEFS	2		;DYN. PROCEDURE POINTER
    47                          ;
    48  02dc  0000              PAGE:	DEFS	2		;START OF USER PROGRAM
    49  02de  0000              LOMEM:	DEFS	2		;START OF DYN. STORAGE
    50  02e0  0000              FREE:	DEFS	2		;FIRST FREE-SPACE BYTE
    51  02e2  0000              HIMEM:	DEFS	2		;FIRST BYTE ABOVE STACK
    52  02e4  0000              LIBASE:	DEFS	2		;START OF FIRST LIBRARY
    53                          ;
    54  02e6  0000              TRACEN:	DEFS	2		;TRACE FLAG AND NUMBER
    55  02e8  0000              AUTONO:	DEFS	2		;AUTO FLAG AND NUMBER
    56  02ea  0000              ERRTRP:	DEFS	2		;ON ERROR STMT POINTER \
    57  02ec  0000              ONERSP:	DEFS	2		;ON ERROR LOCAL STKPTR /
    58  02ee  0000              ERRTXT:	DEFS	2		;ERROR MESSAGE POINTER
    59  02f0  0000              DATPTR:	DEFS	2		;DATA POINTER
    60  02f2  0000              ERL:	DEFS	2		;LINE NO OF LAST ERROR
    61  02f4  0000              CURLIN:	DEFS	2		;POINTER TO CURRENT LINE
    62  02f6  0000000000        RANDOM:	DEFS	5		;RANDOM NUMBER
    63  02fb  00                COUNT:	DEFS	1		;PRINT POSITION
    64  02fc  00                WIDTH:	DEFS	1		;PRINT WIDTH
    65  02fd  00                ERR:	DEFS	1		;ERROR NUMBER
    66  02fe  00                LISTON:	DEFS	1		;LISTO & OPT FLAG
    67  02ff  00                INCREM:	DEFS	1		;AUTO INCREMENT
    68                          ;
    69                          USER: ; END
    70                          
